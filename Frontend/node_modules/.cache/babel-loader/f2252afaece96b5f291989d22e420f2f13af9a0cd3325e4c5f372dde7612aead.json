{"ast":null,"code":"import axios from \"axios\";\nimport appConfig from \"../Utils/AppConfig\";\nimport { PlayersActionType, playersStore } from \"../Redux/taskState\";\nimport { useState } from \"react\";\nclass DataService {\n  async getAllPlayers() {\n    try {\n      let players = playersStore.getState().players;\n      if (players.length === 0) {\n        const response = await axios.get(appConfig.playersUrl);\n        players = response.data;\n        playersStore.dispatch({\n          type: PlayersActionType.FetchPlayers,\n          payload: players\n        });\n      }\n      return players;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async getTopGoalScorers() {\n    try {\n      let players = playersStore.getState().topPlayers;\n      if (players.length === 0) {\n        const response = await axios.get(appConfig.topPlayersUrl);\n        players = response.data;\n        playersStore.dispatch({\n          type: PlayersActionType.FetchTopPlayers,\n          payload: players\n        });\n      }\n      return players;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async getTheTable() {\n    const [players, setPlayers] = useState([]);\n    try {\n      let players = playersStore.getState().topPlayers;\n      let table = playersStore.getState().table;\n      if (table.length === 0) {\n        const response = await axios.get(appConfig.tableUrl);\n        table = response.data;\n        playersStore.dispatch({\n          type: PlayersActionType.FetchTable,\n          payload: table\n        });\n        playersStore.dispatch({\n          type: PlayersActionType.FetchTopPlayers,\n          payload: players\n        });\n        const currentObject1 = players[Math.floor(Math.random() * players.length)];\n        const currentObject2 = players[Math.floor(Math.random() * players.length)];\n        const scoredPlayer1 = currentObject1;\n        const scoredPlayer2 = currentObject2;\n        console.log(scoredPlayer1.goals += 1, scoredPlayer1.lastName);\n        console.log(scoredPlayer2.goals += 1, scoredPlayer2.lastName);\n        this.getTopGoalScorers();\n      }\n      return table;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async getAllTasksByKindTask() {\n    try {\n      let kindCountry = playersStore.getState().kindCountry;\n      const response = await axios.get(appConfig.countriesUrl);\n      kindCountry = response.data;\n      return kindCountry;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async getTaskByKindTask(kindTaskId) {\n    let kindTask = playersStore.getState().players;\n    let task = kindTask.find(t => t.playerId === kindTaskId);\n    if (!task) {\n      const response = await axios.get(appConfig.taskByTaskUrl + kindTaskId);\n      kindTask = response.data;\n    }\n    return kindTask;\n  }\n  async addTask(task) {\n    try {\n      const headers = {\n        \"Content-Type\": \"multipart/form-data\"\n      };\n      const response = await axios.post(appConfig.playersUrl, task, {\n        headers\n      });\n      const addedTask = response.data;\n      playersStore.dispatch({\n        type: PlayersActionType.AddPlayer,\n        payload: addedTask\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async deleteTask(taskId) {\n    try {\n      await axios.delete(appConfig.playersUrl + taskId);\n      playersStore.dispatch({\n        type: PlayersActionType.DeletePlayer,\n        payload: taskId\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async updateTask(task) {\n    try {\n      const headers = {\n        \"Content-Type\": \"multipart/form-data\"\n      };\n      const response = await axios.put(appConfig.playersUrl + task.playerId, task, {\n        headers\n      });\n      const updateTask = response.data;\n      console.log(updateTask);\n      playersStore.dispatch({\n        type: PlayersActionType.UpdatePlayer,\n        payload: updateTask\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\nconst dataService = new DataService();\nexport default dataService;","map":{"version":3,"names":["axios","appConfig","PlayersActionType","playersStore","useState","DataService","getAllPlayers","players","getState","length","response","get","playersUrl","data","dispatch","type","FetchPlayers","payload","err","console","log","getTopGoalScorers","topPlayers","topPlayersUrl","FetchTopPlayers","getTheTable","setPlayers","table","tableUrl","FetchTable","currentObject1","Math","floor","random","currentObject2","scoredPlayer1","scoredPlayer2","goals","lastName","getAllTasksByKindTask","kindCountry","countriesUrl","getTaskByKindTask","kindTaskId","kindTask","task","find","t","playerId","taskByTaskUrl","addTask","headers","post","addedTask","AddPlayer","deleteTask","taskId","delete","DeletePlayer","updateTask","put","UpdatePlayer","dataService"],"sources":["C:/Users/User/Desktop/javascript/manchester project/Frontend/src/Services/DataService.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport appConfig from \"../Utils/AppConfig\";\r\nimport TeamModel from \"../Models/TeamModel\";\r\nimport CountryModel from \"../Models/CountryModel\";\r\nimport TableModel from \"../Models/TableModel\";\r\nimport { PlayersActionType, playersStore } from \"../Redux/taskState\";\r\nimport { useState } from \"react\";\r\n\r\nclass DataService {\r\n\r\n    async getAllPlayers(): Promise<TeamModel[]> {\r\n        try {\r\n            let players = playersStore.getState().players;\r\n            if (players.length === 0) {\r\n                const response = await axios.get<TeamModel[]>(appConfig.playersUrl);\r\n                players = response.data;\r\n                playersStore.dispatch({ type: PlayersActionType.FetchPlayers, payload: players })\r\n            }\r\n            return players;\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    async getTopGoalScorers(): Promise<TeamModel[]> {\r\n        try {\r\n            let players = playersStore.getState().topPlayers;\r\n            if (players.length === 0) {\r\n                const response = await axios.get<TeamModel[]>(appConfig.topPlayersUrl);\r\n                players = response.data;\r\n                playersStore.dispatch({ type: PlayersActionType.FetchTopPlayers, payload: players })\r\n            }\r\n            return players;\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    async getTheTable(): Promise<TableModel[]> {\r\n        const [players, setPlayers] = useState<TeamModel[]>([]);\r\n\r\n        try {\r\n            let players = playersStore.getState().topPlayers;\r\n            let table = playersStore.getState().table;\r\n            if (table.length === 0) {\r\n                const response = await axios.get<TableModel[]>(appConfig.tableUrl);\r\n                table = response.data;\r\n                playersStore.dispatch({ type: PlayersActionType.FetchTable, payload: table })\r\n                playersStore.dispatch({ type: PlayersActionType.FetchTopPlayers, payload: players })\r\n              \r\n                const currentObject1 = players[Math.floor(Math.random() * players.length)];\r\n                const currentObject2 = players[Math.floor(Math.random() *  players.length)];\r\n        \r\n                const scoredPlayer1 = currentObject1;\r\n                const scoredPlayer2 = currentObject2;\r\n        \r\n                console.log(scoredPlayer1.goals += 1 , scoredPlayer1.lastName);\r\n                console.log(scoredPlayer2.goals += 1 , scoredPlayer2.lastName);\r\n                this.getTopGoalScorers();\r\n            }\r\n            return table;\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    async getAllTasksByKindTask(): Promise<CountryModel[]> {\r\n        try {\r\n            let kindCountry = playersStore.getState().kindCountry;\r\n            const response = await axios.get<CountryModel[]>(appConfig.countriesUrl);\r\n            kindCountry = response.data;\r\n            return kindCountry;\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    async getTaskByKindTask(kindTaskId: number): Promise<TeamModel[]> {\r\n        let kindTask = playersStore.getState().players\r\n        let task = kindTask.find(t => t.playerId === kindTaskId)\r\n        if (!task) {\r\n            const response = await axios.get<TeamModel[]>(appConfig.taskByTaskUrl + kindTaskId);\r\n            kindTask = response.data;\r\n        }\r\n        return kindTask;\r\n    }\r\n\r\n\r\n    async addTask(task: TeamModel): Promise<void> {\r\n        try {\r\n            const headers = { \"Content-Type\": \"multipart/form-data\" };\r\n            const response = await axios.post<TeamModel>(appConfig.playersUrl, task, { headers })\r\n            const addedTask = response.data;\r\n            playersStore.dispatch({ type: PlayersActionType.AddPlayer, payload: addedTask })\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    async deleteTask(taskId: number): Promise<void> {\r\n        try {\r\n            await axios.delete(appConfig.playersUrl + taskId);\r\n            playersStore.dispatch({ type: PlayersActionType.DeletePlayer, payload: taskId })\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    async updateTask(task: TeamModel): Promise<void> {\r\n        try {\r\n            const headers = { \"Content-Type\": \"multipart/form-data\" };\r\n            const response = await axios.put<TeamModel>(appConfig.playersUrl + task.playerId, task, { headers });\r\n            const updateTask = response.data;\r\n            console.log(updateTask);\r\n            playersStore.dispatch({ type: PlayersActionType.UpdatePlayer, payload: updateTask });\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\nconst dataService = new DataService();\r\nexport default dataService;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}